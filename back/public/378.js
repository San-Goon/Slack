(self.webpackChunkfront=self.webpackChunkfront||[]).push([[378],{5692:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7294),l=n(1574);const r=(0,l.Z)("div",{target:"egzuo0e1"})({name:"10w7pu7",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;&>div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"}),o=(0,l.Z)("button",{target:"egzuo0e0"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"});var i=({show:e,children:t,onCloseModal:n})=>{const l=(0,a.useCallback)((e=>{e.stopPropagation()}),[]);return e?a.createElement(r,{onClick:n},a.createElement("div",{onClick:l},a.createElement(o,{onClick:n},"×"),t)):null}},2951:function(e,t,n){"use strict";var a=n(6809),l=n.n(a),r=n(7294),o=n(175);const i={};t.Z=e=>{const t=(0,r.useCallback)((()=>{e&&(i[e].disconnect(),delete i[e])}),[]);return e?(i[e]||(i[e]=l().connect(`${o.T}/ws-${e}`,{transports:["websocket"]})),[i[e],t]):[void 0,t]}},2655:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var a=n(3564),l=n(9669),r=n.n(l),o=n(7294),i=n(5977),s=n(2503),c=n(1574);const p=(0,c.Z)("div",{target:"e1or125l13"})({name:"tjo4qw",styles:"float:right"}),d=(0,c.Z)("header",{target:"e1or125l12"})({name:"fvf0bi",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255, 255, 255, 0.1);padding:5px;text-align:center"}),m=(0,c.Z)("img",{target:"e1or125l11"})({name:"1ly4jlu",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px"}),u=(0,c.Z)("div",{target:"e1or125l10"})({name:"47px7v",styles:"display:flex;padding:20px;& img{display:flex;}&>div{display:flex;flex-direction:column;margin-left:10px;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),h=(0,c.Z)("button",{target:"e1or125l9"})({name:"bl1q1k",styles:"border:none;width:100%;border-top:1px solid rgb(29, 28, 29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer"}),g=(0,c.Z)("div",{target:"e1or125l8"})({name:"36bnqj",styles:"display:flex;flex:1"}),b=(0,c.Z)("div",{target:"e1or125l7"})({name:"17lvj7e",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82, 38, 83);border-right:1px solid rgb(82, 38, 83);vertical-align:top;text-align:center;padding:15px 0 0"}),x=(0,c.Z)("nav",{target:"e1or125l6"})({name:"2pkygn",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188, 171, 188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),f=(0,c.Z)("button",{target:"e1or125l5"})({name:"1rmthq7",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82, 38, 83);border-bottom:1px solid rgb(82, 38, 83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer"}),k=(0,c.Z)("div",{target:"e1or125l4"})({name:"1146j5j",styles:"height:calc(100vh - 102px);overflow-y:auto"}),w=(0,c.Z)("div",{target:"e1or125l3"})({name:"192o1ir",styles:"padding:10px 0 0;& h2{padding-left:20px;}&>button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28, 29, 28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28, 29, 28);}}"}),E=(0,c.Z)("div",{target:"e1or125l2"})({name:"82a6rk",styles:"flex:1"}),v=(0,c.Z)("button",{target:"e1or125l1"})({name:"9tlmej",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer"}),Z=(0,c.Z)("button",{target:"e1or125l0"})({name:"wsqixl",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer"});var C=n(6182),y=n.n(C),_=n(3810);const $=(0,c.Z)("div",{target:"ewtxl0r1"})({name:"3nqusf",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;&>div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29, 28, 29);}"}),P=(0,c.Z)("button",{target:"ewtxl0r0"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"}),I=({children:e,style:t,show:n,onCloseModal:a,closeButton:l})=>{const r=(0,o.useCallback)((e=>{e.stopPropagation()}),[]);return n?o.createElement($,{onClick:a},o.createElement("div",{style:t,onClick:r},l&&o.createElement(P,{onClick:a},"×"),e)):null};I.defaultProps={closeButton:!0};var S=I,z=n(3727),M=n(3046),q=n(8678),O=n(5692),N=n(9249);n(5202);var U=({show:e,onCloseModal:t,setShowCreateChannelModal:n})=>{const[l,c,p]=(0,q.Z)(""),{workspace:d,channel:m}=(0,i.UO)(),{data:u,error:h,mutate:g}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),{data:b,mutate:x}=(0,s.ZP)(u?`/api/workspaces/${d}/channels`:null,a.Z),f=(0,o.useCallback)((e=>{e.preventDefault(),r().post(`/api/workspaces/${d}/channels`,{name:l},{withCredentials:!0}).then((()=>{n(!1),p(""),x()})).catch((e=>{var t;console.dir(e),N.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[l,d]);return o.createElement(O.Z,{show:e,onCloseModal:t},o.createElement("form",{onSubmit:f},o.createElement(M.__,{id:"channel-label"},o.createElement("span",null,"채널"),o.createElement(M.II,{id:"channel",value:l,onChange:c})),o.createElement(M.zx,{type:"submit"},"생성하기")))},j=({show:e,onCloseModal:t,setShowInviteWorkspaceModal:n})=>{const{workspace:l}=(0,i.UO)(),[c,p,d]=(0,q.Z)(""),{data:m}=(0,s.ZP)("/api/users",a.Z),{mutate:u}=(0,s.ZP)(m?`/api/workspaces/${l}/members`:null,a.Z),h=(0,o.useCallback)((e=>{e.preventDefault(),c&&c.trim()&&r().post(`/api/workspaces/${l}/members`,{email:c}).then((()=>{u(),n(!1),d("")})).catch((e=>{var t;console.dir(e),N.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[l,c]);return o.createElement(O.Z,{show:e,onCloseModal:t},o.createElement("form",{onSubmit:h},o.createElement(M.__,{id:"member-label"},o.createElement("span",null,"이메일"),o.createElement(M.II,{id:"member",type:"email",value:c,onChange:p})),o.createElement(M.zx,{type:"submit"},"초대하기")))},A=({member:e,isOnline:t})=>{const{workspace:n}=(0,i.UO)(),l=(0,i.TH)(),{data:r}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),c=localStorage.getItem(`${n}-${e.id}`)||0,{data:p,mutate:d}=(0,s.ZP)(r?`/api/workspaces/${n}/dms/${e.id}/unread?after=${c}`:null,a.Z);return(0,o.useEffect)((()=>{l.pathname===`/workspace/${n}/dm/${e.id}`&&d()}),[d,l.pathname,n,e]),o.createElement(z.OL,{key:e.id,activeClassName:"selected",to:`/workspace/${n}/dm/${e.id}`},o.createElement("i",{className:"c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence "+(t?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"),"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),o.createElement("span",{className:p&&p>0?"bold":void 0},e.nickname),e.id===(null==r?void 0:r.id)&&o.createElement("span",null," (나)"),p&&p>0&&o.createElement("span",{className:"count"},p)||null)},W=n(2951);const D=(0,c.Z)("button",{target:"e1odrz9k0"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(({collapse:e})=>e&&"\n    & i {\n      transform: none;\n    }\n  "),";");var L=()=>{const{workspace:e}=(0,i.UO)(),{data:t}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),{data:n}=(0,s.ZP)(t?`/api/workspaces/${e}/members`:null,a.Z),[l,r]=(0,o.useState)(!1),[c,p]=(0,o.useState)([]),[d]=(0,W.Z)(e),m=(0,o.useCallback)((()=>{r((e=>!e))}),[]);return(0,o.useEffect)((()=>{p([])}),[]),(0,o.useEffect)((()=>(null==d||d.on("onlineList",(e=>{p(e)})),()=>{null==d||d.off("onlineList")})),[d]),o.createElement(o.Fragment,null,o.createElement("h2",null,o.createElement(D,{collapse:l,onClick:m},o.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel-sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon-inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),o.createElement("span",null,"Direct Message")),o.createElement("div",null,!l&&(null==n?void 0:n.map((e=>{const t=c.includes(e.id);return o.createElement(A,{key:e.id,member:e,isOnline:t})})))))},T=({channel:e})=>{const{workspace:t}=(0,i.UO)(),n=(0,i.TH)(),{data:l}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),r=localStorage.getItem(`${t}-${e.name}`)||0,{data:c,mutate:p}=(0,s.ZP)(l?`/api/workspaces/${t}/channels/${e.name}/unreads?after=${r}`:null,a.Z);return(0,o.useEffect)((()=>{n.pathname===`/workspace/${t}/channel/${e.name}`&&p(0)}),[p,n.pathname,t,e]),o.createElement(z.OL,{key:e.name,activeClassName:"selected",to:`/workspace/${t}/channel/${e.name}`},o.createElement("span",{className:void 0!==c&&c>0?"bold":void 0},"# ",e.name),void 0!==c&&c>0&&o.createElement("span",{className:"count"},c))},B=()=>{const{workspace:e}=(0,i.UO)(),{data:t}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),{data:n}=(0,s.ZP)(t?`/api/workspaces/${e}/channels`:null,a.Z),[l,r]=(0,o.useState)(!1),c=(0,o.useCallback)((()=>{r((e=>!e))}),[]);return o.createElement(o.Fragment,null,o.createElement("h2",null,o.createElement(D,{collapse:l,onClick:c},o.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),o.createElement("span",null,"Channels")),o.createElement("div",null,!l&&(null==n?void 0:n.map((e=>o.createElement(T,{key:e.id,channel:e}))))))};const F=(0,_.ZP)((()=>Promise.all([n.e(133),n.e(410),n.e(591)]).then(n.bind(n,8591)))),H=(0,_.ZP)((()=>Promise.all([n.e(133),n.e(410),n.e(94)]).then(n.bind(n,3094))));var G=()=>{const[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(!1),[c,C,_]=(0,q.Z)(""),[$,P,I]=(0,q.Z)(""),[A,D]=(0,o.useState)(!1),[T,G]=(0,o.useState)(!1),[J,K]=(0,o.useState)(!1),{workspace:Q}=(0,i.UO)(),{data:R,mutate:V}=(0,s.ZP)("/api/users",a.Z,{dedupingInterval:2e3}),{data:X}=(0,s.ZP)(R?`/api/workspaces/${Q}/channels`:null,a.Z),[Y,ee]=(0,W.Z)(Q);(0,o.useEffect)((()=>{X&&R&&Y&&Y.emit("login",{id:R.id,channels:X.map((e=>e.id))})}),[Y,X,R]);const te=(0,o.useCallback)((()=>{r().post("/api/users/logout",null,{withCredentials:!0}).then((()=>{V(!1,!1)}))}),[V]),ne=(0,o.useCallback)((()=>{t((e=>!e))}),[]),ae=(0,o.useCallback)((e=>{e.stopPropagation(),t(!1)}),[]),le=(0,o.useCallback)((()=>{l(!0)}),[]),re=(0,o.useCallback)((e=>{e.preventDefault(),c&&c.trim()&&$&&$.trim()&&r().post("/api/workspaces",{workspace:c,url:$},{withCredentials:!0}).then((()=>{V(),l(!1),_(""),I("")})).catch((e=>{var t;console.dir(e),N.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[c,$]),oe=(0,o.useCallback)((()=>{l(!1),G(!1),K(!1)}),[]),ie=(0,o.useCallback)((()=>{G(!0)}),[]),se=(0,o.useCallback)((()=>{K(!0)}),[]);(0,o.useEffect)((()=>()=>{ee()}),[Q,ee]);const ce=(0,o.useCallback)((()=>{D((e=>!e))}),[]);return R?o.createElement("div",null,o.createElement(d,null,o.createElement(p,null,o.createElement("span",{onClick:ne},o.createElement(m,{src:y().url(R.email,{s:"28px",d:"retro"}),alt:R.nickname}),e&&o.createElement(S,{style:{right:0,top:38},show:e,onCloseModal:ae},o.createElement(u,null,o.createElement("img",{src:y().url(R.email,{s:"36px",d:"retro"}),alt:R.nickname}),o.createElement("div",null,o.createElement("span",{id:"profile-name"},R.nickname),o.createElement("span",{id:"profile-active"},"Active"))),o.createElement(h,{onClick:te},"로그아웃"))))),o.createElement(g,null,o.createElement(b,null,null==R?void 0:R.Workspaces.map((e=>o.createElement(z.rU,{key:e.id,to:"/workspace/123/channel/일반"},o.createElement(Z,null,e.name.slice(0,1).toUpperCase())))),o.createElement(v,{onClick:le},"+")),o.createElement(x,null,o.createElement(f,{onClick:ce},"Sleact"),o.createElement(k,null,o.createElement(S,{show:A,onCloseModal:ce,style:{top:95,left:80}},o.createElement(w,null,o.createElement("h2",null,"Sleact"),o.createElement("button",{onClick:se},"워크스페이스에 사용자 초대"),o.createElement("button",{onClick:ie},"채널 만들기"),o.createElement("button",{onClick:te},"로그아웃"))),o.createElement(B,null),o.createElement(L,null))),o.createElement(E,null,o.createElement(i.rs,null,o.createElement(i.AW,{path:"/workspace/:workspace/channel/:channel",component:F}),o.createElement(i.AW,{path:"/workspace/:workspace/dm/:id",component:H})))),o.createElement(O.Z,{show:n,onCloseModal:oe},o.createElement("form",{onSubmit:re},o.createElement(M.__,{id:"workspace-label"},o.createElement("span",null,"워크스페이스 이름"),o.createElement(M.II,{id:"workspace",value:c,onChange:C})),o.createElement(M.__,{id:"workspace-url-label"},o.createElement("span",null,"워크스페이스 url"),o.createElement(M.II,{id:"workspace",value:$,onChange:P})),o.createElement(M.zx,{type:"submit"},"생성하기"))),o.createElement(U,{show:T,onCloseModal:oe,setShowCreateChannelModal:G}),o.createElement(j,{show:J,onCloseModal:oe,setShowInviteWorkspaceModal:K}),o.createElement(N.Ix,{position:"bottom-center"})):o.createElement(i.l_,{to:"/login"})}},175:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});const a="http://3.38.95.51"},7020:function(){}}]);